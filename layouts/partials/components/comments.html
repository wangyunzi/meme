{{ if and (.Params.comments | default .Site.Params.enableComments) (eq hugo.Environment "production") }}
    {{- if or (in .Site.Params.mainSections .Section) .Params.comments }}
    
    {{ if not .Site.Params.autoLoadComments }}
    <div class="load-comments">
    <div id="load-comments">{{ i18n "loadComments" }}</div>
    </div>
    {{  end }}
    
    {{ if .Site.Params.enableDisqus }}
    <div id="disqus_thread"></div>
    {{ end }}
    
    {{ if .Site.Params.enableValine }}
    <div id="vcomments"></div>
    {{ end }}
    
    {{ if .Site.Params.enableWaline }}
    <div id="waline"></div>
    {{ end }}
    
    {{ if .Site.Params.enableUtterances }}
    <div id="utterances"></div>
    {{ end }}
    
    {{ if .Site.Params.enableGitalk }}
    <div id="gitalk-container"></div>
    {{ end }}
    
    {{ end }}
{{ end }}




{{- if .Site.Params.enableTwikoo -}}
<div class="pagination__title">
  <span class="pagination__title-h">ğŸ’¬æ¬¢è¿è¯„è®º</span>
  <hr />
</div>
  <div id="tcomment"></div>
  <script src="https://cdn.staticfile.org/twikoo/1.6.7/twikoo.all.min.js"></script>
  <!-- lightGallery -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.1.8/css/lightgallery.css">
  <script src="https://cdn.jsdelivr.net/npm/lightgallery@2.1.8/lightgallery.min.js"></script>
  <script>
  twikoo.init({
  envId: 'https://twikoo.wangyunzi.com/', // è…¾è®¯äº‘ç¯å¢ƒå¡« envIdï¼›Vercel ç¯å¢ƒå¡«åœ°å€ï¼ˆhttps://xxx.vercel.appï¼‰
  el: '#tcomment', // å®¹å™¨å…ƒç´ 
  // region: 'ap-guangzhou', // ç¯å¢ƒåœ°åŸŸï¼Œé»˜è®¤ä¸º ap-shanghaiï¼Œè…¾è®¯äº‘ç¯å¢ƒå¡« ap-shanghai æˆ– ap-guangzhouï¼›Vercel ç¯å¢ƒä¸å¡«
  // path: location.pathname, // ç”¨äºåŒºåˆ†ä¸åŒæ–‡ç« çš„è‡ªå®šä¹‰ js è·¯å¾„ï¼Œå¦‚æœæ‚¨çš„æ–‡ç« è·¯å¾„ä¸æ˜¯ location.pathnameï¼Œéœ€ä¼ æ­¤å‚æ•°
  // lang: 'zh-CN', // ç”¨äºæ‰‹åŠ¨è®¾å®šè¯„è®ºåŒºè¯­è¨€ï¼Œæ”¯æŒçš„è¯­è¨€åˆ—è¡¨ https://github.com/imaegoo/twikoo/blob/main/src/client/utils/i18n/index.js

  onCommentLoaded: function () {
    var commentContents = document.getElementsByClassName('tk-content');
    for (var i = 0; i < commentContents.length; i++) {
      var commentItem = commentContents[i];
      var imgEls = commentItem.getElementsByTagName('img');
      if (imgEls.length > 0) {
        for (var j = 0; j < imgEls.length; j++) {
          var imgEl = imgEls[j];
          var aEl = document.createElement('a');
          aEl.setAttribute('class', 'tk-lg-link');
          aEl.setAttribute('href', imgEl.getAttribute('src'));
          aEl.setAttribute('data-src', imgEl.getAttribute('src'));
          aEl.appendChild(imgEl.cloneNode(false));
          imgEl.parentNode.insertBefore(aEl, imgEl.nextSibling);
          imgEl.remove();
        }
        lightGallery(commentItem, {
          selector: '.tk-lg-link',
          share: true
        });
      }
    }
  }
})
  
  </script>

{{- end }}



